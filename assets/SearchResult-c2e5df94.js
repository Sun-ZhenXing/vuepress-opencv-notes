import{u as te,a as I,k as ae,b as se,P as C,B as ne,c as le}from"./app-d3610904.js";import{r as k,h as b,c as oe,u as re,L as ie,aa as ce,o as ue,n as de,j as s,ab as X,z as ve,K as fe,i as he}from"./framework-d3922052.js";function pe(t){if(Array.isArray(t)){for(var e=0,a=Array(t.length);e<t.length;e++)a[e]=t[e];return a}else return Array.from(t)}var x=!1;if(typeof window<"u"){var Z={get passive(){x=!0}};window.addEventListener("testPassive",null,Z),window.removeEventListener("testPassive",null,Z)}var P=typeof window<"u"&&window.navigator&&window.navigator.platform&&(/iP(ad|hone|od)/.test(window.navigator.platform)||window.navigator.platform==="MacIntel"&&window.navigator.maxTouchPoints>1),w=[],R=!1,T=-1,E=void 0,H=void 0,D=function(e){return w.some(function(a){return!!(a.options.allowTouchMove&&a.options.allowTouchMove(e))})},z=function(e){var a=e||window.event;return D(a.target)||a.touches.length>1?!0:(a.preventDefault&&a.preventDefault(),!1)},ye=function(e){if(H===void 0){var a=!!e&&e.reserveScrollBarGap===!0,n=window.innerWidth-document.documentElement.clientWidth;a&&n>0&&(H=document.body.style.paddingRight,document.body.style.paddingRight=n+"px")}E===void 0&&(E=document.body.style.overflow,document.body.style.overflow="hidden")},me=function(){H!==void 0&&(document.body.style.paddingRight=H,H=void 0),E!==void 0&&(document.body.style.overflow=E,E=void 0)},ge=function(e){return e?e.scrollHeight-e.scrollTop<=e.clientHeight:!1},we=function(e,a){var n=e.targetTouches[0].clientY-T;return D(e.target)?!1:a&&a.scrollTop===0&&n>0||ge(a)&&n<0?z(e):(e.stopPropagation(),!0)},ke=function(e,a){if(!e){console.error("disableBodyScroll unsuccessful - targetElement must be provided when calling disableBodyScroll on IOS devices.");return}if(!w.some(function(l){return l.targetElement===e})){var n={targetElement:e,options:a||{}};w=[].concat(pe(w),[n]),P?(e.ontouchstart=function(l){l.targetTouches.length===1&&(T=l.targetTouches[0].clientY)},e.ontouchmove=function(l){l.targetTouches.length===1&&we(l,e)},R||(document.addEventListener("touchmove",z,x?{passive:!1}:void 0),R=!0)):ye(a)}},Ee=function(){P?(w.forEach(function(e){e.targetElement.ontouchstart=null,e.targetElement.ontouchmove=null}),R&&(document.removeEventListener("touchmove",z,x?{passive:!1}:void 0),R=!1),T=-1):me(),w=[]};const He="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";const M=()=>s(C,{name:"close"},()=>s("path",{d:"m925.468 822.294-303.27-310.288L925.51 201.674c34.683-27.842 38.3-75.802 8.122-107.217-30.135-31.37-82.733-34.259-117.408-6.463L512.001 399.257 207.777 87.993C173.1 60.197 120.504 63.087 90.369 94.456c-30.179 31.415-26.561 79.376 8.122 107.217L401.8 512.005l-303.27 310.29c-34.724 27.82-38.34 75.846-8.117 107.194 30.135 31.437 82.729 34.327 117.408 6.486L512 624.756l304.177 311.22c34.68 27.84 87.272 24.95 117.408-6.487 30.223-31.348 26.56-79.375-8.118-107.195z"}));M.displayName="CloseIcon";const V=()=>s(C,{name:"heading"},()=>s("path",{d:"M250.4 704.6H64V595.4h202.4l26.2-166.6H94V319.6h214.4L352 64h127.8l-43.6 255.4h211.2L691 64h126.2l-43.6 255.4H960v109.2H756.2l-24.6 166.6H930v109.2H717L672 960H545.8l43.6-255.4H376.6L333 960H206.8l43.6-255.4zm168.4-276L394 595.4h211.2l24.6-166.6h-211z"}));V.displayName="HeadingIcon";const K=()=>s(C,{name:"heart"},()=>s("path",{d:"M1024 358.156C1024 195.698 892.3 64 729.844 64c-86.362 0-164.03 37.218-217.844 96.49C458.186 101.218 380.518 64 294.156 64 131.698 64 0 195.698 0 358.156 0 444.518 37.218 522.186 96.49 576H96l320 320c32 32 64 64 96 64s64-32 96-64l320-320h-.49c59.272-53.814 96.49-131.482 96.49-217.844zM841.468 481.232 517.49 805.49a2981.962 2981.962 0 0 1-5.49 5.48c-1.96-1.95-3.814-3.802-5.49-5.48L182.532 481.234C147.366 449.306 128 405.596 128 358.156 128 266.538 202.538 192 294.156 192c47.44 0 91.15 19.366 123.076 54.532L512 350.912l94.768-104.378C638.696 211.366 682.404 192 729.844 192 821.462 192 896 266.538 896 358.156c0 47.44-19.368 91.15-54.532 123.076z"}));K.displayName="HeartIcon";const W=()=>s(C,{name:"history"},()=>s("path",{d:"M512 1024a512 512 0 1 1 512-512 512 512 0 0 1-512 512zm0-896a384 384 0 1 0 384 384 384 384 0 0 0-384-384zm192 448H512a64 64 0 0 1-64-64V320a64 64 0 0 1 128 0v128h128a64 64 0 0 1 0 128z"}));W.displayName="HistoryIcon";const G=()=>s(C,{name:"title"},()=>s("path",{d:"M512 256c70.656 0 134.656 28.672 180.992 75.008A254.933 254.933 0 0 1 768 512c0 83.968-41.024 157.888-103.488 204.48C688.96 748.736 704 788.48 704 832c0 105.984-86.016 192-192 192-106.048 0-192-86.016-192-192h128a64 64 0 1 0 128 0 64 64 0 0 0-64-64 255.19 255.19 0 0 1-181.056-75.008A255.403 255.403 0 0 1 256 512c0-83.968 41.024-157.824 103.488-204.544C335.04 275.264 320 235.584 320 192A192 192 0 0 1 512 0c105.984 0 192 85.952 192 192H576a64.021 64.021 0 0 0-128 0c0 35.328 28.672 64 64 64zM384 512c0 70.656 57.344 128 128 128s128-57.344 128-128-57.344-128-128-128-128 57.344-128 128z"}));G.displayName="TitleIcon";const Ce={},Le=300,A=5,Ne={"/":{cancel:"取消",placeholder:"搜索",search:"搜索",select:"选择",navigate:"切换",exit:"关闭",history:"搜索历史",emptyHistory:"无搜索历史",emptyResult:"没有找到结果",loading:"正在加载搜索索引..."}},be="search-pro-history-results",m=te(be,[]),Re=()=>({history:m,addHistory:t=>{m.value.length<A?m.value=[t,...m.value]:m.value=[t,...m.value.slice(0,A-1)]},removeHistory:t=>{m.value=[...m.value.slice(0,t),...m.value.slice(t+1)]}}),ze=k(He),Be=b(()=>JSON.parse(ne(ze.value))),N=(t,e)=>{const a=t.toLowerCase(),n=e.toLowerCase(),l=[];let r=0,v=0;const f=(o,h=!1)=>{let i="";v===0?i=o.length>20?`… ${o.slice(-20)}`:o:h?i=o.length+v>100?`${o.slice(0,100-v)}… `:o:i=o.length>20?`${o.slice(0,20)} … ${o.slice(-20)}`:o,i&&l.push(i),v+=i.length,h||(l.push(["strong",e]),v+=e.length,v>=100&&l.push(" …"))};let p=a.indexOf(n,r);if(p===-1)return null;for(;p>=0;){const o=p+n.length;if(f(t.slice(r,p)),r=o,v>100)break;p=a.indexOf(n,r)}return v<100&&f(t.slice(r),!0),l},j=t=>t.reduce((e,{type:a})=>e+(a==="title"?50:a==="heading"?20:a==="custom"?10:1),0),Je=(t,e)=>{var a;const n={};for(const[l,r]of Object.entries(e)){const v=((a=e[l.replace(/\/[^\\]*$/,"")])==null?void 0:a.title)||"",f=`${v?`${v} > `:""}${r.title}`,p=N(r.title,t);p&&(n[f]=[...n[f]||[],{type:"title",path:l,display:p}]),r.customFields&&Object.entries(r.customFields).forEach(([o,h])=>{h.forEach(i=>{const c=N(i,t);c&&(n[f]=[...n[f]||[],{type:"custom",path:l,index:o,display:c}])})});for(const o of r.contents){const h=N(o.header,t);h&&(n[f]=[...n[f]||[],{type:"heading",path:l+(o.slug?`#${o.slug}`:""),display:h}]);for(const i of o.contents){const c=N(i,t);c&&(n[f]=[...n[f]||[],{type:"content",header:o.header,path:l+(o.slug?`#${o.slug}`:""),display:c}])}}}return Object.keys(n).sort((l,r)=>j(n[l])-j(n[r])).map(l=>({title:l,contents:n[l]}))},qe=t=>{const e=I(),a=k([]),n=b(()=>Be.value[e.value]),l=le(r=>{a.value=r?Je(r,n.value):[]},Le);return ve([t,e],()=>{l(t.value)}),a};var Ye=oe({name:"SearchResult",props:{query:{type:String,required:!0}},emits:{close:()=>!0,updateQuery:t=>!0},setup(t,{emit:e}){const a=re(),n=ie(),l=I(),r=ae(Ne),{history:v,addHistory:f,removeHistory:p}=Re(),o=ce(t,"query"),h=qe(o),i=k(0),c=k(0),Y=k(),B=b(()=>h.value.length>0),J=b(()=>h.value[i.value]||null),Q=()=>{i.value=i.value>0?i.value-1:h.value.length-1,c.value=J.value.contents.length-1},U=()=>{i.value=i.value<h.value.length-1?i.value+1:0,c.value=0},$=()=>{c.value<J.value.contents.length-1?c.value=c.value+1:U()},_=()=>{c.value>0?c.value=c.value-1:Q()},O=u=>u.map(d=>he(d)?d:s(d[0],d[1])),F=u=>{if(u.type==="custom"){const d=Ce[u.index]||"$content",[g,L=""]=fe(d)?d[l.value].split("$content"):d.split("$content");return O([g,...u.display,L])}return O(u.display)},q=()=>{i.value=0,c.value=0,e("updateQuery",""),e("close")};return ue(()=>{se("keydown",u=>{if(B.value){if(u.key==="ArrowUp")_();else if(u.key==="ArrowDown")$();else if(u.key==="Enter"){const d=J.value.contents[c.value];n.path!==d.path&&(f(d),a.push(d.path),q())}}}),ke(Y.value,{reserveScrollBarGap:!0})}),de(()=>{Ee()}),()=>s("div",{class:["search-pro-result",{empty:o.value===""?v.value.length===0:!B.value}],ref:Y},o.value===""?v.value.length?s("ul",{class:"search-pro-result-list"},s("li",{class:"search-pro-result-list-item"},[s("div",{class:"search-pro-result-title"},r.value.history),v.value.map((u,d)=>s(X,{to:u.path,class:["search-pro-result-item",{active:c.value===d}],onClick:()=>{console.log("click"),q()}},()=>[s(W,{class:"search-pro-result-type"}),s("div",{class:"search-pro-result-content"},[u.type==="content"&&u.header?s("div",{class:"content-header"},u.header):null,s("div",F(u))]),s("button",{class:"search-pro-close-icon",onClick:g=>{g.preventDefault(),g.stopPropagation(),p(d)}},s(M))]))])):r.value.emptyHistory:B.value?s("ul",{class:"search-pro-result-list"},h.value.map(({title:u,contents:d},g)=>{const L=i.value===g;return s("li",{class:["search-pro-result-list-item",{active:L}]},[s("div",{class:"search-pro-result-title"},u||"Documentation"),d.map((y,ee)=>{const S=L&&c.value===ee;return s(X,{to:y.path,class:["search-pro-result-item",{active:S,"aria-selected":S}],onClick:()=>{f(y),q()}},()=>[y.type==="content"?null:s(y.type==="title"?G:y.type==="heading"?V:K,{class:"search-pro-result-type"}),s("div",{class:"search-pro-result-content"},[y.type==="content"&&y.header?s("div",{class:"content-header"},y.header):null,s("div",F(y))])])})])})):r.value.emptyResult)}});export{Ye as default};
