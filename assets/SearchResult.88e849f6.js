import{u as W,g as A,h as Q,i as Z,j as K,k as $,l as R,S as _,t as ee,m as te,n as ae,p as ne,q as r,R as le,s as L,v as oe,x as re,y as se,z as ie}from"./app.0b74bd75.js";function ue(a){if(Array.isArray(a)){for(var e=0,t=Array(a.length);e<a.length;e++)t[e]=a[e];return t}else return Array.from(a)}var F=!1;if(typeof window<"u"){var M={get passive(){F=!0}};window.addEventListener("testPassive",null,M),window.removeEventListener("testPassive",null,M)}var z=typeof window<"u"&&window.navigator&&window.navigator.platform&&(/iP(ad|hone|od)/.test(window.navigator.platform)||window.navigator.platform==="MacIntel"&&window.navigator.maxTouchPoints>1),g=[],S=!1,T=-1,D=void 0,C=void 0,U=function(e){return g.some(function(t){return!!(t.options.allowTouchMove&&t.options.allowTouchMove(e))})},H=function(e){var t=e||window.event;return U(t.target)||t.touches.length>1?!0:(t.preventDefault&&t.preventDefault(),!1)},ce=function(e){if(C===void 0){var t=!!e&&e.reserveScrollBarGap===!0,n=window.innerWidth-document.documentElement.clientWidth;t&&n>0&&(C=document.body.style.paddingRight,document.body.style.paddingRight=n+"px")}D===void 0&&(D=document.body.style.overflow,document.body.style.overflow="hidden")},de=function(){C!==void 0&&(document.body.style.paddingRight=C,C=void 0),D!==void 0&&(document.body.style.overflow=D,D=void 0)},ve=function(e){return e?e.scrollHeight-e.scrollTop<=e.clientHeight:!1},fe=function(e,t){var n=e.targetTouches[0].clientY-T;return U(e.target)?!1:t&&t.scrollTop===0&&n>0||ve(t)&&n<0?H(e):(e.stopPropagation(),!0)},pe=function(e,t){if(!e){console.error("disableBodyScroll unsuccessful - targetElement must be provided when calling disableBodyScroll on IOS devices.");return}if(!g.some(function(l){return l.targetElement===e})){var n={targetElement:e,options:t||{}};g=[].concat(ue(g),[n]),z?(e.ontouchstart=function(l){l.targetTouches.length===1&&(T=l.targetTouches[0].clientY)},e.ontouchmove=function(l){l.targetTouches.length===1&&fe(l,e)},S||(document.addEventListener("touchmove",H,F?{passive:!1}:void 0),S=!0)):ce(t)}},he=function(){z?(g.forEach(function(e){e.targetElement.ontouchstart=null,e.targetElement.ontouchmove=null}),S&&(document.removeEventListener("touchmove",H,F?{passive:!1}:void 0),S=!1),T=-1):de(),g=[]};const ye="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";const Y=()=>r(L,{name:"heading"},()=>r("path",{d:"M250.4 704.6H64V595.4h202.4l26.2-166.6H94V319.6h214.4L352 64h127.8l-43.6 255.4h211.2L691 64h126.2l-43.6 255.4H960v109.2H756.2l-24.6 166.6H930v109.2H717L672 960H545.8l43.6-255.4H376.6L333 960H206.8l43.6-255.4zm168.4-276L394 595.4h211.2l24.6-166.6h-211z"}));Y.displayName="HeadingIcon";const I=()=>r(L,{name:"heart"},()=>r("path",{d:"M1024 358.156C1024 195.698 892.3 64 729.844 64c-86.362 0-164.03 37.218-217.844 96.49C458.186 101.218 380.518 64 294.156 64 131.698 64 0 195.698 0 358.156 0 444.518 37.218 522.186 96.49 576H96l320 320c32 32 64 64 96 64s64-32 96-64l320-320h-.49c59.272-53.814 96.49-131.482 96.49-217.844zM841.468 481.232 517.49 805.49a2981.962 2981.962 0 0 1-5.49 5.48c-1.96-1.95-3.814-3.802-5.49-5.48L182.532 481.234C147.366 449.306 128 405.596 128 358.156 128 266.538 202.538 192 294.156 192c47.44 0 91.15 19.366 123.076 54.532L512 350.912l94.768-104.378C638.696 211.366 682.404 192 729.844 192 821.462 192 896 266.538 896 358.156c0 47.44-19.368 91.15-54.532 123.076z"}));I.displayName="HeartIcon";const j=()=>r(L,{name:"history"},()=>r("path",{d:"M512 1024a512 512 0 1 1 512-512 512 512 0 0 1-512 512zm0-896a384 384 0 1 0 384 384 384 384 0 0 0-384-384zm192 448H512a64 64 0 0 1-64-64V320a64 64 0 0 1 128 0v128h128a64 64 0 0 1 0 128z"}));j.displayName="HistoryIcon";const X=()=>r(L,{name:"title"},()=>r("path",{d:"M512 256c70.656 0 134.656 28.672 180.992 75.008A254.933 254.933 0 0 1 768 512c0 83.968-41.024 157.888-103.488 204.48C688.96 748.736 704 788.48 704 832c0 105.984-86.016 192-192 192-106.048 0-192-86.016-192-192h128a64 64 0 1 0 128 0 64 64 0 0 0-64-64 255.19 255.19 0 0 1-181.056-75.008A255.403 255.403 0 0 1 256 512c0-83.968 41.024-157.824 103.488-204.544C335.04 275.264 320 235.584 320 192A192 192 0 0 1 512 0c105.984 0 192 85.952 192 192H576a64.021 64.021 0 0 0-128 0c0 35.328 28.672 64 64 64zM384 512c0 70.656 57.344 128 128 128s128-57.344 128-128-57.344-128-128-128-128 57.344-128 128z"}));X.displayName="TitleIcon";const me="search-pro-history",m=W(me,[]),ge=(a=5)=>{const e=t=>{m.value.length<a?m.value=Array.from(new Set([t,...m.value])):m.value=Array.from(new Set([...m.value.slice(0,a-1),t]))};return{history:oe(m),addHistory:e}},we=A(ye),Ae=Q(()=>JSON.parse(re(we.value))),De={},Ce=300,be={"/":{cancel:"取消",placeholder:"搜索",search:"搜索",select:"选择",navigate:"切换",exit:"关闭",history:"搜索历史",emptyHistory:"无搜索历史",emptyResult:"没有找到结果",loading:"正在加载搜索索引..."}},E=(a,e)=>{const t=[];let n=0,l=0;const i=a.toLowerCase(),h=e.toLowerCase();let u=i.indexOf(h,n);const f=(s,c)=>{let o=s,p=!1;if(!c&&o.length>100&&l===0&&(o=`… ${o.slice(-10)}`),l+o.length>100){if(t.some(w=>w[0]==="strong"))return;o=o.slice(0,Math.max(100-l,1)),p=!0}o.length&&(t.push(c?["strong",o]:o),l+=o.length),p&&(t.push("…"),l+=2)};if(u<0)return null;for(;u>=0;){const s=u+h.length;if(f(a.slice(n,u),!1),f(a.slice(u,s),!0),n=s,u=i.indexOf(h,n),l>100)break}return f(a.slice(n),!1),t},O=a=>a.reduce((e,{type:t})=>e+(t==="title"?50:t==="heading"?20:t==="custom"?10:1),0),Ee=(a,e)=>{var t;const n={};for(const[l,i]of Object.entries(e)){const h=((t=e[l.replace(/\/[^\\]*$/,"")])==null?void 0:t.title)||"",u=`${h?`${h} > `:""}${i.title}`,f=E(i.title,a);f&&(n[u]=[...n[u]||[],{type:"title",path:l,display:f}]),i.customFields&&Object.entries(i.customFields).forEach(([s,c])=>{c.forEach(o=>{const p=E(o,a);p&&(n[u]=[...n[u]||[],{type:"custom",path:l,index:s,display:p}])})});for(const s of i.contents){const c=E(s.header,a);c&&(n[u]=[...n[u]||[],{type:"heading",path:l+(s.slug?`#${s.slug}`:""),display:c}]);for(const o of s.contents){const p=E(o,a);p&&(n[u]=[...n[u]||[],{type:"content",header:s.header||i.title||"Documentation",path:l+(s.slug?`#${s.slug}`:""),display:p}])}}}return Object.keys(n).sort((l,i)=>O(n[l])-O(n[i])).map(l=>({title:l,contents:n[l]}))},Qe=a=>{const e=R(),t=A([]),n=Q(()=>Ae.value[e.value]),l=ie(i=>{t.value=i?Ee(i,n.value):[]},Ce);return se([a,e],()=>{l(a.value)}),t};var He=Z({name:"SearchResult",props:{query:{type:String,required:!0}},emits:["close","updateQuery"],setup(a,{emit:e}){const t=K(),n=$(),l=R(),i=_(be),{history:h,addHistory:u}=ge(),f=ee(a,"query"),s=Qe(f),c=A(0),o=A(0),p=A(),w=Q(()=>s.value.length>0),k=Q(()=>s.value[c.value]||null),q=()=>{c.value=c.value>0?c.value-1:s.value.length-1,o.value=k.value.contents.length-1},P=()=>{c.value=c.value<s.value.length-1?c.value+1:0,o.value=0},x=()=>{o.value<k.value.contents.length-1?o.value=o.value+1:P()},V=()=>{o.value>0?o.value=o.value-1:q()},B=d=>d.map(v=>typeof v=="string"?v:r(v[0],v[1])),G=d=>{if(d.type==="custom"){const v=De[d.index]||"$content",[N,b=""]=typeof v=="object"?v[l.value].split("$content"):v.split("$content");return B([N,...d.display,b])}return B(d.display)};return te(()=>{ae("keydown",d=>{if(w.value){if(d.key==="ArrowUp")V();else if(d.key==="ArrowDown")x();else if(d.key==="Enter"){const v=k.value.contents[o.value].path;n.path!==v&&(t.push(v),u(f.value),e("updateQuery",""),e("close"))}}}),pe(p.value,{reserveScrollBarGap:!0})}),ne(()=>{he()}),()=>r("div",{class:["search-pro-result",{empty:f.value===""?h.value.length===0:!w.value}],ref:p},f.value===""?h.value.length?r("ul",{class:"search-pro-result-list"},h.value.map(d=>r("li",{class:"search-pro-result-list-item"},[r("div",{class:"search-pro-result-title"},i.value.history),r("div",{class:"search-pro-result-item",onClick:()=>{e("updateQuery",d)}},[r(j,{class:"search-pro-result-type"}),r("div",{class:"search-pro-result-content"},d)])]))):i.value.emptyHistory:w.value?r("ul",{class:"search-pro-result-list"},s.value.map(({title:d,contents:v},N)=>{const b=c.value===N;return r("li",{class:["search-pro-result-list-item",{active:b}]},[r("div",{class:"search-pro-result-title"},d||"Documentation"),v.map((y,J)=>r(le,{to:y.path,class:["search-pro-result-item",{active:b&&o.value===J}],onClick:()=>{u(f.value),e("updateQuery",""),e("close")}},()=>[y.type==="content"?null:r(y.type==="title"?X:y.type==="heading"?Y:I,{class:"search-pro-result-type"}),r("div",{class:"search-pro-result-content"},[y.type==="content"?r("div",{class:"content-header"},y.header):null,r("div",G(y))])]))])})):i.value.emptyResult)}});export{He as default};
